@page
@model EmailModel
@{
    ViewData["Title"] = "Manage Email";
    ViewData["ActivePage"] = ManageNavPages.Email;
}

<h3 class="text-2xl font-semibold text-gray-800 mb-4">@ViewData["Title"]</h3>
<partial name="_StatusMessage" for="StatusMessage" />

<form id="email-form" method="post" class="max-w-md space-y-4">
    <div asp-validation-summary="All" class="text-red-600 text-sm" role="alert"></div>

    @if (Model.IsEmailConfirmed)
    {
        <div class="flex items-center space-x-2">
            <input asp-for="Email"
                   class="flex-1 px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100"
                   placeholder="Please enter your email."
                   disabled />
            <span class="text-green-600 font-bold">✓</span>
        </div>
    }
    else
    {
        <div class="space-y-2">
            <input asp-for="Email"
                   class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100"
                   placeholder="Please enter your email."
                   disabled />
            <button id="email-verification"
                    type="submit"
                    asp-page-handler="SendVerificationEmail"
                    class="text-blue-600 hover:text-blue-800 text-sm">
                Send verification email
            </button>
        </div>
    }

    <div class="space-y-2">
        <label asp-for="Input.NewEmail" class="block text-sm font-medium text-gray-700"></label>
        <input asp-for="Input.NewEmail"
               class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
               autocomplete="email"
               aria-required="true"
               placeholder="Please enter new email." />
        <span asp-validation-for="Input.NewEmail" class="text-red-600 text-sm"></span>
    </div>

    <button id="change-email-button"
            type="submit"
            asp-page-handler="ChangeEmail"
            class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition duration-200">
        Change email
    </button>
</form>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}